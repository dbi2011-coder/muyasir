<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ - Ù…ÙŠØ³Ø± Ø§Ù„ØªØ¹Ù„Ù…</title>
    
    <!-- Ø®Ø·ÙˆØ· Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Ù…Ù„ÙØ§Øª CSS -->
    <link rel="stylesheet" href="../../assets/css/main.css">
    <link rel="stylesheet" href="../../assets/css/dashboard.css">
    <link rel="stylesheet" href="../../assets/css/teacher.css">
    
    <style>
        /* Ø£Ù†Ù…Ø§Ø· Ø¥Ø¶Ø§ÙÙŠØ© Ø®Ø§ØµØ© Ø¨Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .content-management-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .content-actions-bar {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .modal-content.large {
            max-width: 800px;
            width: 90%;
        }
        
        .lesson-section, .questions-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
        
        .section-content {
            background: var(--light-color);
            padding: 15px;
            border-radius: 6px;
            min-height: 100px;
            white-space: pre-wrap;
        }
        
        .exercise-item, .question-item {
            background: var(--light-color);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }
        
        .choices-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin: 10px 0;
        }
        
        .choice-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: white;
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }
        
        .form-section {
            margin-bottom: 20px;
        }
        
        .form-section h4 {
            color: var(--secondary-color);
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--border-color);
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="../../assets/images/logo.png" alt="Ø´Ø¹Ø§Ø± Ù…ÙŠØ³Ø± Ø§Ù„ØªØ¹Ù„Ù…">
                    <h2>Ù…ÙŠØ³Ø± Ø§Ù„ØªØ¹Ù„Ù…</h2>
                </div>
            </div>
            
            <ul class="sidebar-menu">
                <li><a href="dashboard.html"><i class="menu-icon fas fa-home"></i>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="students.html"><i class="menu-icon fas fa-users"></i>Ø§Ù„Ø·Ù„Ø§Ø¨</a></li>
                <li><a href="tests.html"><i class="menu-icon fas fa-clipboard-check"></i>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</a></li>
                <li><a href="lessons.html"><i class="menu-icon fas fa-book-open"></i>Ø§Ù„Ø¯Ø±ÙˆØ³</a></li>
                <li><a href="assignments.html"><i class="menu-icon fas fa-tasks"></i>Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª</a></li>
                <li><a href="content-library.html" class="active"><i class="menu-icon fas fa-book"></i>Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰</a></li>
                <li><a href="schedule.html"><i class="menu-icon fas fa-calendar-alt"></i>Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</a></li>
                <li><a href="committee.html"><i class="menu-icon fas fa-comments"></i>Ù„Ø¬Ù†Ø© ØµØ¹ÙˆØ¨Ø§Øª Ø§Ù„ØªØ¹Ù„Ù…</a></li>
                <li><a href="reports.html"><i class="menu-icon fas fa-chart-bar"></i>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a></li>
                <li><a href="#" onclick="logout()"><i class="menu-icon fas fa-sign-out-alt"></i>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a></li>
            </ul>
        </aside>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <main class="main-content-dashboard">
            <!-- Ø±Ø£Ø³ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
            <header class="dashboard-header">
                <button class="mobile-menu-btn" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="header-actions">
                    <div class="user-info">
                        <div class="user-welcome">
                            <div class="welcome-text">Ù…Ø±Ø­Ø¨Ø§Ù‹</div>
                            <div class="user-name" id="userName">Ø§Ù„Ù…Ø¹Ù„Ù…</div>
                        </div>
                        <div class="user-avatar" id="userAvatar">Ù…</div>
                    </div>
                </div>
            </header>

            <!-- Ù…Ø­ØªÙˆÙ‰ ØµÙØ­Ø© Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
            <div class="dashboard-content">
                <div class="content-management-header">
                    <h1>ğŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</h1>
                    
                    <div class="content-actions-bar">
                        <button class="btn btn-primary" onclick="showNewTestModal()">
                            <i class="fas fa-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯
                        </button>
                        <button class="btn btn-success" onclick="showNewLessonModal()">
                            <i class="fas fa-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯
                        </button>
                    </div>
                </div>

                <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª -->
                <section class="library-section">
                    <div class="section-header">
                        <h2>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</h2>
                        <div class="search-box">
                            <input type="text" id="testSearch" placeholder="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª..." 
                                   onkeyup="searchContent('test')" class="form-control">
                            <button class="btn btn-primary">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>

                    <div class="content-grid" id="testsGrid">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                        <div class="loading-state">
                            <div class="loading-spinner"></div>
                            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª...</p>
                        </div>
                    </div>
                </section>

                <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ -->
                <section class="library-section">
                    <div class="section-header">
                        <h2>Ø§Ù„Ø¯Ø±ÙˆØ³</h2>
                        <div class="search-box">
                            <input type="text" id="lessonSearch" placeholder="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¯Ø±ÙˆØ³..." 
                                   onkeyup="searchContent('lesson')" class="form-control">
                            <button class="btn btn-primary">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>

                    <div class="content-grid" id="lessonsGrid">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                        <div class="loading-state">
                            <div class="loading-spinner"></div>
                            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø±ÙˆØ³...</p>
                        </div>
                    </div>
                </section>

                <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© -->
                <section class="library-section">
                    <div class="section-header">
                        <h2>Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h2>
                        <div class="search-box">
                            <input type="text" id="objectiveSearch" placeholder="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù..." 
                                   onkeyup="searchContent('objective')" class="form-control">
                            <button class="btn btn-primary">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>

                    <div class="objectives-list" id="objectivesList">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                        <div class="loading-state">
                            <div class="loading-spinner"></div>
                            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©...</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯ -->
    <div class="modal" id="newTestModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯</h3>
                <button class="modal-close" onclick="closeNewTestModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="newTestForm">
                    <div class="form-section">
                        <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h4>
                        <div class="form-group">
                            <label for="testTitle" class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± *</label>
                            <input type="text" id="testTitle" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="testSubject" class="form-label">Ø§Ù„Ù…Ø§Ø¯Ø© *</label>
                            <select id="testSubject" class="form-control" required>
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>
                                <option value="Ù„ØºØªÙŠ">Ù„ØºØªÙŠ</option>
                                <option value="Ø±ÙŠØ§Ø¶ÙŠØ§Øª">Ø±ÙŠØ§Ø¶ÙŠØ§Øª</option>
                                <option value="Ø¹Ù„ÙˆÙ…">Ø¹Ù„ÙˆÙ…</option>
                                <option value="ØªØ±Ø¨ÙŠØ© Ø§Ø³Ù„Ø§Ù…ÙŠØ©">ØªØ±Ø¨ÙŠØ© Ø§Ø³Ù„Ø§Ù…ÙŠØ©</option>
                                <option value="Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª">Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="testDescription" class="form-label">ÙˆØµÙ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                            <textarea id="testDescription" class="form-control" rows="3"></textarea>
                        </div>
                    </div>

                    <div class="questions-section" id="questionsSection">
                        <h4>Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h4>
                        <div id="questionsContainer">
                            <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                        </div>
                        
                        <button type="button" class="btn btn-secondary" onclick="addQuestion()">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„
                        </button>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeNewTestModal()">Ø¥Ù„ØºØ§Ø¡</button>
                        <button type="submit" class="btn btn-primary">Ø­ÙØ¸ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯ -->
    <div class="modal" id="newLessonModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯</h3>
                <button class="modal-close" onclick="closeNewLessonModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="newLessonForm">
                    <div class="form-section">
                        <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h4>
                        <div class="form-group">
                            <label for="lessonTitle" class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³ *</label>
                            <input type="text" id="lessonTitle" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="lessonStrategy" class="form-label">Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© *</label>
                            <select id="lessonStrategy" class="form-control" required>
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©</option>
                                <option value="Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ØªØ¹Ø§ÙˆÙ†ÙŠ">Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ØªØ¹Ø§ÙˆÙ†ÙŠ</option>
                                <option value="Ø§Ù„ØªØ¹Ù„Ù… Ø¨Ø§Ù„Ù„Ø¹Ø¨">Ø§Ù„ØªØ¹Ù„Ù… Ø¨Ø§Ù„Ù„Ø¹Ø¨</option>
                                <option value="Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù†Ø´Ø·">Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù†Ø´Ø·</option>
                                <option value="Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ">Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ</option>
                                <option value="Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª">Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="lessonSubject" class="form-label">Ø§Ù„Ù…Ø§Ø¯Ø© *</label>
                            <select id="lessonSubject" class="form-control" required>
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>
                                <option value="Ù„ØºØªÙŠ">Ù„ØºØªÙŠ</option>
                                <option value="Ø±ÙŠØ§Ø¶ÙŠØ§Øª">Ø±ÙŠØ§Ø¶ÙŠØ§Øª</option>
                                <option value="Ø¹Ù„ÙˆÙ…">Ø¹Ù„ÙˆÙ…</option>
                                <option value="ØªØ±Ø¨ÙŠØ© Ø§Ø³Ù„Ø§Ù…ÙŠØ©">ØªØ±Ø¨ÙŠØ© Ø§Ø³Ù„Ø§Ù…ÙŠØ©</option>
                                <option value="Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª">Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="lessonDescription" class="form-label">ÙˆØµÙ Ø§Ù„Ø¯Ø±Ø³ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                            <textarea id="lessonDescription" class="form-control" rows="3"></textarea>
                        </div>
                    </div>

                    <div class="lesson-section">
                        <h4>Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø³</h4>
                        <div class="form-group">
                            <label for="lessonIntroduction" class="form-label">Ø§Ù„ØªÙ…Ù‡ÙŠØ¯</label>
                            <textarea id="lessonIntroduction" class="form-control section-content" rows="5"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="lessonContent" class="form-label">Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
                            <textarea id="lessonContent" class="form-control section-content" rows="10"></textarea>
                        </div>
                    </div>

                    <div class="lesson-section" id="exercisesSection">
                        <h4>Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…</h4>
                        <div id="exercisesContainer">
                            <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                        </div>
                        
                        <button type="button" class="btn btn-secondary" onclick="addExercise()">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø±ÙŠÙ†
                        </button>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeNewLessonModal()">Ø¥Ù„ØºØ§Ø¡</button>
                        <button type="submit" class="btn btn-primary">Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Ù…Ù„ÙØ§Øª JavaScript -->
    <script src="../../assets/js/auth.js"></script>
    <script src="../../assets/js/teacher.js"></script>
    
    <!-- JavaScript Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    <script>
        // ØªÙ‡ÙŠØ¦Ø© Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        document.addEventListener('DOMContentLoaded', function() {
            const user = checkAuth();
            if (!user || user.role !== 'teacher') {
                window.location.href = '../../index.html';
                return;
            }
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            document.getElementById('userName').textContent = user.name;
            document.getElementById('userAvatar').textContent = user.name.charAt(0);
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            loadContentLibrary();
        });

        function loadContentLibrary() {
            loadTests();
            loadLessons();
            loadTeachingObjectives();
        }

        function loadTests() {
            const testsGrid = document.getElementById('testsGrid');
            const tests = JSON.parse(localStorage.getItem('teacherTests') || '[]');
            
            if (tests.length === 0) {
                testsGrid.innerHTML = `
                    <div class="empty-content-state">
                        <div class="empty-icon">ğŸ“</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</h3>
                        <p>Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙŠ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¨Ø¹Ø¯</p>
                        <button class="btn btn-primary" onclick="showNewTestModal()">Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ Ø§Ø®ØªØ¨Ø§Ø±</button>
                    </div>
                `;
                return;
            }

            testsGrid.innerHTML = tests.map(test => `
                <div class="content-card">
                    <div class="content-header">
                        <h4>${test.title}</h4>
                        <span class="content-badge subject-${test.subject.replace(/\s/g, '')}">${test.subject}</span>
                    </div>
                    <div class="content-body">
                        <p>${test.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
                        <div class="content-meta">
                            <span class="questions-count">${test.questions?.length || 0} Ø³Ø¤Ø§Ù„</span>
                            <span class="total-grade">Ø§Ù„Ø¯Ø±Ø¬Ø©: ${test.totalGrade || 0}</span>
                        </div>
                    </div>
                    <div class="content-actions">
                        <button class="btn btn-sm btn-primary" onclick="viewTest(${test.id})">Ø¹Ø±Ø¶</button>
                        <button class="btn btn-sm btn-warning" onclick="editTest(${test.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteTest(${test.id})">Ø­Ø°Ù</button>
                    </div>
                </div>
            `).join('');
        }

        function loadLessons() {
            const lessonsGrid = document.getElementById('lessonsGrid');
            const lessons = JSON.parse(localStorage.getItem('teacherLessons') || '[]');
            
            if (lessons.length === 0) {
                lessonsGrid.innerHTML = `
                    <div class="empty-content-state">
                        <div class="empty-icon">ğŸ“š</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³</h3>
                        <p>Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙŠ Ø¯Ø±ÙˆØ³ Ø¨Ø¹Ø¯</p>
                        <button class="btn btn-primary" onclick="showNewLessonModal()">Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ Ø¯Ø±Ø³</button>
                    </div>
                `;
                return;
            }

            lessonsGrid.innerHTML = lessons.map(lesson => `
                <div class="content-card">
                    <div class="content-header">
                        <h4>${lesson.title}</h4>
                        <span class="content-badge subject-${lesson.subject.replace(/\s/g, '')}">${lesson.subject}</span>
                    </div>
                    <div class="content-body">
                        <p>${lesson.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
                        <div class="content-meta">
                            <span class="strategy">${lesson.strategy}</span>
                            <span class="exercises-count">${lesson.exercises?.length || 0} ØªÙ…Ø±ÙŠÙ†</span>
                        </div>
                    </div>
                    <div class="content-actions">
                        <button class="btn btn-sm btn-primary" onclick="viewLesson(${lesson.id})">Ø¹Ø±Ø¶</button>
                        <button class="btn btn-sm btn-warning" onclick="editLesson(${lesson.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteLesson(${lesson.id})">Ø­Ø°Ù</button>
                    </div>
                </div>
            `).join('');
        }

        function loadTeachingObjectives() {
            const objectivesList = document.getElementById('objectivesList');
            const objectives = JSON.parse(localStorage.getItem('teachingObjectives') || '[]');
            
            if (objectives.length === 0) {
                objectivesList.innerHTML = `
                    <div class="empty-content-state">
                        <div class="empty-icon">ğŸ¯</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù‡Ø¯Ø§Ù ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h3>
                        <p>Ù„Ù… ØªÙ‚Ù… Ø¨ØªØ¹Ø±ÙŠÙ Ø£ÙŠ Ø£Ù‡Ø¯Ø§Ù ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø¨Ø¹Ø¯</p>
                    </div>
                `;
                return;
            }

            objectivesList.innerHTML = objectives.map(objective => `
                <div class="objective-item">
                    <div class="objective-header">
                        <h4>${objective.subject} - ${objective.grade}</h4>
                        <span class="content-badge badge-primary">${objective.unit}</span>
                    </div>
                    <div class="teaching-objectives">
                        ${objective.objectives.map(obj => `
                            <div class="teaching-objective">${obj}</div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
        function showNewTestModal() {
            document.getElementById('newTestModal').classList.add('show');
            document.getElementById('newTestForm').reset();
            document.getElementById('questionsContainer').innerHTML = '';
            addQuestion(); // Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„ Ø§ÙØªØ±Ø§Ø¶ÙŠ
        }

        function closeNewTestModal() {
            document.getElementById('newTestModal').classList.remove('show');
        }

        function addQuestion() {
            const questionsContainer = document.getElementById('questionsContainer');
            const questionNumber = questionsContainer.children.length + 1;
            
            const questionHtml = `
                <div class="question-item" id="question-${questionNumber}">
                    <div class="question-header">
                        <h5>Ø³Ø¤Ø§Ù„ ${questionNumber}</h5>
                        <button type="button" class="btn btn-sm btn-danger" onclick="removeQuestion(${questionNumber})">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„" required>
                    </div>
                    <div class="choices-container">
                        <div class="choice-item">
                            <input type="radio" name="answer-${questionNumber}" value="a" required>
                            <input type="text" class="form-control" placeholder="Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„" required>
                            <span class="badge badge-secondary">Ø£</span>
                        </div>
                        <div class="choice-item">
                            <input type="radio" name="answer-${questionNumber}" value="b" required>
                            <input type="text" class="form-control" placeholder="Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ" required>
                            <span class="badge badge-secondary">Ø¨</span>
                        </div>
                        <div class="choice-item">
                            <input type="radio" name="answer-${questionNumber}" value="c" required>
                            <input type="text" class="form-control" placeholder="Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø«Ø§Ù„Ø«">
                            <span class="badge badge-secondary">Ø¬</span>
                        </div>
                        <div class="choice-item">
                            <input type="radio" name="answer-${questionNumber}" value="d" required>
                            <input type="text" class="form-control" placeholder="Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø±Ø§Ø¨Ø¹">
                            <span class="badge badge-secondary">Ø¯</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø³Ø¤Ø§Ù„:</label>
                        <select class="form-control">
                            <option value="1">1 Ø¯Ø±Ø¬Ø©</option>
                            <option value="2">2 Ø¯Ø±Ø¬Ø©</option>
                            <option value="3">3 Ø¯Ø±Ø¬Ø§Øª</option>
                            <option value="4">4 Ø¯Ø±Ø¬Ø§Øª</option>
                            <option value="5">5 Ø¯Ø±Ø¬Ø§Øª</option>
                        </select>
                    </div>
                </div>
            `;
            
            questionsContainer.insertAdjacentHTML('beforeend', questionHtml);
        }

        function removeQuestion(questionNumber) {
            const questionElement = document.getElementById(`question-${questionNumber}`);
            if (questionElement && document.querySelectorAll('.question-item').length > 1) {
                questionElement.remove();
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ±Ù‚ÙŠÙ… Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
                renumberQuestions();
            }
        }

        function renumberQuestions() {
            const questions = document.querySelectorAll('.question-item');
            questions.forEach((question, index) => {
                const questionHeader = question.querySelector('h5');
                const radioButtons = question.querySelectorAll('input[type="radio"]');
                
                if (questionHeader) {
                    questionHeader.textContent = `Ø³Ø¤Ø§Ù„ ${index + 1}`;
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø£Ø³Ù…Ø§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ
                radioButtons.forEach(radio => {
                    radio.name = `answer-${index + 1}`;
                });
            });
        }

        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø±ÙˆØ³
        function showNewLessonModal() {
            document.getElementById('newLessonModal').classList.add('show');
            document.getElementById('newLessonForm').reset();
            document.getElementById('exercisesContainer').innerHTML = '';
        }

        function closeNewLessonModal() {
            document.getElementById('newLessonModal').classList.remove('show');
        }

        function addExercise() {
            const exercisesContainer = document.getElementById('exercisesContainer');
            const exerciseNumber = exercisesContainer.children.length + 1;
            
            const exerciseHtml = `
                <div class="exercise-item" id="exercise-${exerciseNumber}">
                    <div class="exercise-header">
                        <h5>ØªÙ…Ø±ÙŠÙ† ${exerciseNumber}</h5>
                        <button type="button" class="btn btn-sm btn-danger" onclick="removeExercise(${exerciseNumber})">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙ…Ø±ÙŠÙ†" required>
                    </div>
                    <div class="form-group">
                        <textarea class="form-control" rows="3" placeholder="ÙˆØµÙ Ø§Ù„ØªÙ…Ø±ÙŠÙ†" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Ù†ÙˆØ¹ Ø§Ù„ØªÙ…Ø±ÙŠÙ†:</label>
                        <select class="form-control">
                            <option value="Ø§Ø®ØªÙŠØ§Ø±ÙŠ">Ø§Ø®ØªÙŠØ§Ø±ÙŠ</option>
                            <option value="ØµØ­ ÙˆØ®Ø·Ø£">ØµØ­ ÙˆØ®Ø·Ø£</option>
                            <option value="Ù…Ù‚Ø§Ù„ÙŠ">Ù…Ù‚Ø§Ù„ÙŠ</option>
                            <option value="Ø¹Ù…Ù„ÙŠ">Ø¹Ù…Ù„ÙŠ</option>
                        </select>
                    </div>
                </div>
            `;
            
            exercisesContainer.insertAdjacentHTML('beforeend', exerciseHtml);
        }

        function removeExercise(exerciseNumber) {
            const exerciseElement = document.getElementById(`exercise-${exerciseNumber}`);
            if (exerciseElement) {
                exerciseElement.remove();
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ±Ù‚ÙŠÙ… Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†
                renumberExercises();
            }
        }

        function renumberExercises() {
            const exercises = document.querySelectorAll('.exercise-item');
            exercises.forEach((exercise, index) => {
                const exerciseHeader = exercise.querySelector('h5');
                if (exerciseHeader) {
                    exerciseHeader.textContent = `ØªÙ…Ø±ÙŠÙ† ${index + 1}`;
                }
            });
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¨Ø­Ø«
        function searchContent(type) {
            let searchInput, gridId;
            
            switch(type) {
                case 'test':
                    searchInput = document.getElementById('testSearch').value.toLowerCase();
                    gridId = 'testsGrid';
                    break;
                case 'lesson':
                    searchInput = document.getElementById('lessonSearch').value.toLowerCase();
                    gridId = 'lessonsGrid';
                    break;
                case 'objective':
                    searchInput = document.getElementById('objectiveSearch').value.toLowerCase();
                    gridId = 'objectivesList';
                    break;
                default:
                    return;
            }
            
            const contentItems = document.querySelectorAll(`#${gridId} .content-card, #${gridId} .objective-item`);
            
            contentItems.forEach(item => {
                const title = item.querySelector('h4')?.textContent.toLowerCase() || '';
                const subject = item.querySelector('.content-badge')?.textContent.toLowerCase() || '';
                const description = item.querySelector('p')?.textContent.toLowerCase() || '';
                
                const matches = title.includes(searchInput) || 
                              subject.includes(searchInput) || 
                              description.includes(searchInput);
                
                item.style.display = matches ? '' : 'none';
            });
        }

        // Ø¯ÙˆØ§Ù„ Ø¹Ø±Ø¶ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ±Ù‡Ø§)
        function viewTest(testId) {
            alert(`Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ${testId} - Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±`);
        }

        function editTest(testId) {
            alert(`ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ${testId} - Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±`);
        }

        function deleteTest(testId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŸ')) {
                const tests = JSON.parse(localStorage.getItem('teacherTests') || '[]');
                const updatedTests = tests.filter(test => test.id !== testId);
                localStorage.setItem('teacherTests', JSON.stringify(updatedTests));
                loadTests();
                showAuthNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        function viewLesson(lessonId) {
            alert(`Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±Ø³ ${lessonId} - Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±`);
        }

        function editLesson(lessonId) {
            alert(`ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯Ø±Ø³ ${lessonId} - Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±`);
        }

        function deleteLesson(lessonId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ØŸ')) {
                const lessons = JSON.parse(localStorage.getItem('teacherLessons') || '[]');
                const updatedLessons = lessons.filter(lesson => lesson.id !== lessonId);
                localStorage.setItem('teacherLessons', JSON.stringify(updatedLessons));
                loadLessons();
                showAuthNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø©
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('active');
        }

        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¯ÙˆØ§Ù„ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ
        window.showNewTestModal = showNewTestModal;
        window.closeNewTestModal = closeNewTestModal;
        window.addQuestion = addQuestion;
        window.removeQuestion = removeQuestion;
        window.showNewLessonModal = showNewLessonModal;
        window.closeNewLessonModal = closeNewLessonModal;
        window.addExercise = addExercise;
        window.removeExercise = removeExercise;
        window.searchContent = searchContent;
        window.viewTest = viewTest;
        window.editTest = editTest;
        window.deleteTest = deleteTest;
        window.viewLesson = viewLesson;
        window.editLesson = editLesson;
        window.deleteLesson = deleteLesson;
        window.toggleSidebar = toggleSidebar;
    </script>
</body>
</html>
