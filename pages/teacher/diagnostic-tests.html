<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุงุฎุชุจุงุฑุงุช ุงูุชุดุฎูุตูุฉ - ููุณุฑ ุงูุชุนูู</title>
    <link rel="stylesheet" href="../../assets/css/main.css">
    <link rel="stylesheet" href="../../assets/css/teacher.css">
    <link rel="stylesheet" href="../../assets/css/diagnostic-tests.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- ุงูุดุฑูุท ุงูุฌุงูุจู -->
        <div class="sidebar" id="sidebar">
            <!-- ูุญุชูู ุงูุดุฑูุท ุงูุฌุงูุจู -->
        </div>

        <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
        <div class="main-content-dashboard">
            <header class="dashboard-header">
                <!-- ุฑุฃุณ ุงูุตูุญุฉ -->
            </header>

            <main class="dashboard-content">
                <div class="content-header">
                    <h1>๐ ุงูุงุฎุชุจุงุฑุงุช ุงูุชุดุฎูุตูุฉ</h1>
                </div>

                <div class="diagnostic-tests-container">
                    <!-- ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ -->
                    <div class="tests-actions">
                        <button class="btn btn-success btn-lg" onclick="showCreateTestModal()">
                            ๐ ุฅูุดุงุก ุงุฎุชุจุงุฑ ุชุดุฎูุตู ุฌุฏูุฏ
                        </button>
                        <button class="btn btn-primary btn-lg" onclick="showImportTestModal()">
                            ๐ ุงุณุชูุฑุงุฏ ุงุฎุชุจุงุฑ
                        </button>
                    </div>

                    <!-- ูุงุฆูุฉ ุงูุงุฎุชุจุงุฑุงุช ุญุณุจ ุงููุงุฏุฉ -->
                    <div class="tests-list">
                        <!-- ุงุฎุชุจุงุฑุงุช ูุงุฏุฉ ูุบุชู -->
                        <div class="subject-section">
                            <div class="subject-header">
                                <span class="subject-icon">๐</span>
                                <h3>ุงุฎุชุจุงุฑุงุช ูุงุฏุฉ ูุบุชู</h3>
                            </div>
                            <div id="arabicTestsList" class="subject-tests">
                                <!-- ุณูุชู ุชุนุจุฆุชู ุจุงูุฌุงูุงุณูุฑูุจุช -->
                            </div>
                        </div>

                        <!-- ุงุฎุชุจุงุฑุงุช ูุงุฏุฉ ุงูุฑูุงุถูุงุช -->
                        <div class="subject-section">
                            <div class="subject-header">
                                <span class="subject-icon">๐ข</span>
                                <h3>ุงุฎุชุจุงุฑุงุช ูุงุฏุฉ ุงูุฑูุงุถูุงุช</h3>
                            </div>
                            <div id="mathTestsList" class="subject-tests">
                                <!-- ุณูุชู ุชุนุจุฆุชู ุจุงูุฌุงูุงุณูุฑูุจุช -->
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุฅูุดุงุก ุงุฎุชุจุงุฑ ุฌุฏูุฏ -->
    <div id="createTestModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ุฅูุดุงุก ุงุฎุชุจุงุฑ ุชุดุฎูุตู ุฌุฏูุฏ</h3>
                <button class="modal-close" onclick="closeCreateTestModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="createTestForm">
                    <div class="form-group">
                        <label for="testTitle">ุนููุงู ุงูุงุฎุชุจุงุฑ *</label>
                        <input type="text" id="testTitle" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="testSubject">ุงููุงุฏุฉ *</label>
                        <select id="testSubject" class="form-control" required>
                            <option value="">ุงุฎุชุฑ ุงููุงุฏุฉ</option>
                            <option value="ูุบุชู">ูุบุชู</option>
                            <option value="ุฑูุงุถูุงุช">ุฑูุงุถูุงุช</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="testDescription">ูุตู ุงูุงุฎุชุจุงุฑ (ุงุฎุชูุงุฑู)</label>
                        <textarea id="testDescription" class="form-control" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCreateTestModal()">ุฅูุบุงุก</button>
                <button class="btn btn-success" onclick="createNewTest()">ุฅูุดุงุก</button>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงุณุชูุฑุงุฏ ุงุฎุชุจุงุฑ -->
    <div id="importTestModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ุงุณุชูุฑุงุฏ ุงุฎุชุจุงุฑ ุชุดุฎูุตู</h3>
                <button class="modal-close" onclick="closeImportTestModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-export-section">
                    <div class="file-upload-box" onclick="document.getElementById('importFile').click()">
                        <div class="upload-icon">๐</div>
                        <p>ุงููุฑ ูุงุฎุชูุงุฑ ููู ุงูุงุฎุชุจุงุฑ ุฃู ุงุณุญุจ ุงูููู ููุง</p>
                        <input type="file" id="importFile" style="display: none;" accept=".json">
                    </div>
                    <p><small>ููุงุญุธุฉ: ุจุนุฏ ุงูุงุณุชูุฑุงุฏ ูุฌุจ ุฑุจุท ุงูุฃุณุฆูุฉ ุจุงูุฃูุฏุงู ุงููุตูุฑุฉ</small></p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeImportTestModal()">ุฅูุบุงุก</button>
                <button class="btn btn-success" onclick="importTest()">ุงุณุชูุฑุงุฏ</button>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุนุฑุถ ุชูุงุตูู ุงูุงุฎุชุจุงุฑ -->
    <div id="viewTestModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="viewTestTitle">ุนููุงู ุงูุงุฎุชุจุงุฑ</h3>
                <button class="modal-close" onclick="closeViewTestModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="test-details">
                    <p><strong>ุงููุงุฏุฉ:</strong> <span id="viewTestSubject"></span></p>
                    <p><strong>ุงููุตู:</strong> <span id="viewTestDescription"></span></p>
                    <p><strong>ุนุฏุฏ ุงูุฃุณุฆูุฉ:</strong> <span id="viewTestQuestionsCount"></span></p>
                    <p><strong>ูุญู ุงูุงุฌุชูุงุฒ:</strong> <span id="viewTestPassCriteria"></span></p>
                    <p><strong>ุชุงุฑูุฎ ุงูุฅูุดุงุก:</strong> <span id="viewTestCreatedAt"></span></p>
                </div>
                <div class="questions-preview">
                    <h4>ุงูุฃุณุฆูุฉ:</h4>
                    <div id="viewTestQuestions"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeViewTestModal()">ุฅุบูุงู</button>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุฑุจุท ุงูุฃูุฏุงู -->
    <div id="linkObjectivesModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>ุฑุจุท ุงูุฃุณุฆูุฉ ุจุงูุฃูุฏุงู ุงููุตูุฑุฉ</h3>
                <button class="modal-close" onclick="closeLinkObjectivesModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="linking-progress">
                    <h4 id="linkingProgress"></h4>
                    <div class="current-question">
                        <h5>ุงูุณุคุงู ุงูุญุงูู:</h5>
                        <p id="linkingQuestionText"></p>
                    </div>
                    <div class="objectives-linking">
                        <h5>ุงุฎุชุฑ ูุฏู ูุตูุฑ ููุฐุง ุงูุณุคุงู:</h5>
                        <div id="objectivesList"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeLinkObjectivesModal()">ุฅูุบุงุก</button>
                <button class="btn btn-success" onclick="nextQuestionForLinking()">ุงูุชุงูู</button>
            </div>
        </div>
    </div>

    <script src="../../assets/js/auth.js"></script>
    <script src="../../assets/js/diagnostic-tests.js"></script>
    <script>
        // ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
        document.addEventListener('DOMContentLoaded', function() {
            const user = checkAuth();
            if (!user || user.role !== 'teacher') {
                window.location.href = '../../index.html';
                return;
            }
        });
    </script>
</body>
</html>
