<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ملف الطالب - نظام ميسر</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/teacher.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>نظام ميسر</h2>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="dashboard.html"><i class="fas fa-home"></i> الرئيسة</a></li>
                    <li><a href="students.html" class="active"><i class="fas fa-users"></i> الطلاب</a></li>
                    <li><a href="study-schedule.html"><i class="fas fa-calendar-alt"></i> الجدول الدراسي</a></li>
                    <li><a href="objectives-bank.html"><i class="fas fa-book"></i> بنك الأهداف</a></li>
                    <li><a href="../../index.html" onclick="logout()"><i class="fas fa-sign-out-alt"></i> تسجيل خروج</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div class="user-info">
                    <span>مرحباً، أ. صالح</span>
                </div>
            </header>

            <div class="content-wrapper">
                <div class="page-header">
                    <h1>ملف الطالب</h1>
                    <button class="btn btn-secondary" onclick="window.history.back()">عودة</button>
                </div>

                <div class="student-header-card">
                    <div class="student-avatar-large">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <div class="student-info-main">
                        <h2 id="studentNameDisplay">جاري التحميل...</h2>
                        <p id="studentGradeDisplay">البيانات...</p>
                    </div>
                    <div class="student-actions">
                        <button class="btn btn-primary" onclick="printReport()"><i class="fas fa-print"></i> طباعة تقرير</button>
                    </div>
                </div>

                <div class="profile-tabs">
                    <button class="tab-btn active" onclick="switchTab('info')">البيانات الأساسية</button>
                    <button class="tab-btn" onclick="switchTab('iep')">الخطة التربوية (IEP)</button>
                    <button class="tab-btn" onclick="switchTab('progress')">متابعة الأهداف</button>
                </div>

                <div id="info-tab" class="tab-content active">
                    <div class="card">
                        <h3>البيانات الشخصية</h3>
                        <div class="info-grid" id="studentDetailsGrid">
                            </div>
                    </div>
                </div>

                <div id="iep-tab" class="tab-content">
                    <div class="card">
                        <div class="card-header-flex">
                            <h3>الخطة التربوية الفردية</h3>
                            <button class="btn btn-success" onclick="saveIEPData()">حفظ الخطة</button>
                        </div>
                        
                        <form id="iepForm" class="iep-form">
                            <div class="form-group">
                                <label>نقاط القوة لدى الطالب</label>
                                <textarea id="strengths" rows="3" class="form-control"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label>الاحتياجات التربوية</label>
                                <textarea id="needs" rows="3" class="form-control"></textarea>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>الخدمات المساندة</label>
                                        <input type="text" id="supportServices" class="form-control">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>تاريخ إعداد الخطة</label>
                                        <input type="date" id="planDate" class="form-control">
                                    </div>
                                </div>
                            </div>

                            <hr>
                            
                            <div class="schedule-section mt-4">
                                <h4 class="mb-3 text-primary"><i class="fas fa-calendar-check"></i> جدول الحصص (غرفة المصادر)</h4>
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle"></i> يتم وضع علامة (✓) تلقائياً في الحصص المسجلة للطالب في الجدول الدراسي.
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-bordered text-center" id="iepStudentScheduleTable">
                                        <thead class="bg-light">
                                            <tr>
                                                <th style="width: 15%;">اليوم / الحصة</th>
                                                <th>1</th>
                                                <th>2</th>
                                                <th>3</th>
                                                <th>4</th>
                                                <th>5</th>
                                                <th>6</th>
                                                <th>7</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr data-day="الأحد">
                                                <th class="bg-light">الأحد</th>
                                                <td data-period="1"></td> <td data-period="2"></td> <td data-period="3"></td> <td data-period="4"></td> <td data-period="5"></td> <td data-period="6"></td> <td data-period="7"></td>
                                            </tr>
                                            <tr data-day="الإثنين">
                                                <th class="bg-light">الإثنين</th>
                                                <td data-period="1"></td> <td data-period="2"></td> <td data-period="3"></td> <td data-period="4"></td> <td data-period="5"></td> <td data-period="6"></td> <td data-period="7"></td>
                                            </tr>
                                            <tr data-day="الثلاثاء">
                                                <th class="bg-light">الثلاثاء</th>
                                                <td data-period="1"></td> <td data-period="2"></td> <td data-period="3"></td> <td data-period="4"></td> <td data-period="5"></td> <td data-period="6"></td> <td data-period="7"></td>
                                            </tr>
                                            <tr data-day="الأربعاء">
                                                <th class="bg-light">الأربعاء</th>
                                                <td data-period="1"></td> <td data-period="2"></td> <td data-period="3"></td> <td data-period="4"></td> <td data-period="5"></td> <td data-period="6"></td> <td data-period="7"></td>
                                            </tr>
                                            <tr data-day="الخميس">
                                                <th class="bg-light">الخميس</th>
                                                <td data-period="1"></td> <td data-period="2"></td> <td data-period="3"></td> <td data-period="4"></td> <td data-period="5"></td> <td data-period="6"></td> <td data-period="7"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="progress-tab" class="tab-content">
                    <div class="card">
                        <h3>سجل متابعة الأهداف</h3>
                        <div id="objectivesList">
                            <p class="text-muted">لا توجد أهداف مضافة حالياً.</p>
                        </div>
                        <button class="btn btn-primary mt-3" onclick="openAddObjectiveModal()">
                            <i class="fas fa-plus"></i> إضافة هدف جديد
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../../assets/js/dashboard.js"></script> 
    <script src="../../assets/js/student-profile.js"></script>
</body>
</html>
